{"version":3,"sources":["pages/SettingsPage.tsx","pages/HomePage.tsx","components/ShareTextModal.tsx","pages/BookmarkPage.tsx","models/Settings.tsx","redux/reducers/setReducer.tsx","redux/reducers/index.tsx","redux/reducers/tmpSetReducer.tsx","redux/store.tsx","../node_modules/@ionic/core/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ groupOptions: {} namespace object","serviceWorkerRegistration.ts","index.tsx","Globals.tsx","models/Bookmark.tsx","components/ReservoirLiquidView.tsx","liquidFillGauge.js","App.tsx"],"names":["_SettingsPage","props","reportText","state","showBugReportAlert","showLicense","showClearAlert","showToast","toastMessage","className","hidden","this","mainVersion","tabIndex","icon","informationCircle","slot","bug","href","target","checked","hasAppLog","onIonChange","e","isChecked","detail","Globals","enableAppLog","disableAppLog","dispatch","type","key","val","settings","fill","shape","size","onClick","navigator","userAgent","PackageInfos","pwaVersion","JSON","stringify","getLog","setState","cssClass","backdropDismiss","isOpen","header","subHeader","inputs","name","placeholder","buttons","text","handler","value","a","test","name0","axiosInstance","post","bugReportApiUrl","subject","productName","name1","error","console","role","download","style","flexDirection","textAlign","fontSize","settingsJsonUri","encodeURIComponent","localStorage","getItem","storeFile","document","createElement","click","remove","id","accept","display","onChange","ev","file","files","item","fileText","parse","setItem","Error","stack","getElementById","querySelector","onDidPresent","clearAppData","colorPalette","appSettings","iconSize","interface","interfaceOptions","theme","uiFontSize","min","max","pin","snaps","updateCssVars","textFontSize","helpCircle","preventDefault","message","window","open","onDidDismiss","duration","React","Component","SettingsPage","withIonLifeCycle","connect","speechRate","voiceURI","tmpSettings","helpDoc","_HomePage","clickedBookmark","showInfo","addBookmarkAlert","showAllReservoirs","reservoirs","filter","v","EffectiveCapacity","map","info","onIconClick","bookmark","ReservoirIdentifier","information","bulb","fetchData","refresh","show","decodeURIComponent","location","shareSocial","isLoading","fetchError","fetchErrorContent","getReservoirInfos","HomePage","_ShareTextModal","isAppSettingsExport","Array","Object","keys","length","appSettingsString","i","keyVal","join","appUrl","hasQueryString","copyToClipboard","qrcCanvas","qrcode","showModal","swipeToClose","onWillPresent","push","updateQrCode","finish","height","alignItems","flexGrow","flexShrink","margin","width","isStoreApps","_BookmarkPage","bookmarkListRef","reorder","createRef","hasBookmark","history","pwaUrl","bookmarks","uuidStr","setImmediate","event","complete","rows","forEach","label","ReservoirName","button","side","color","delBookmarkHandler","current","closeSlidingItems","b","find","r","undefined","getBookmarkRows","swapVertical","ref","disabled","onIonItemReorder","reorderBookmarks","BookmarkPage","Settings","version","updateUi","newSettings","body","classList","toggle","combineReducers","action","bookmarksTemp","idxToDel","findIndex","splice","defaultSettings","newState","getSavedStore","savedSettingsStr","createStore","reducer","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","code","ids","module","exports","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","log","controller","onUpdate","onSuccess","catch","ReactDOM","render","App","URL","process","origin","addEventListener","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkCallbacks","twrDataUrl","axios","create","baseURL","timeout","responseType","res","obj","TextDecoder","decode","data","DailyOperationalStatisticsOfReservoirs_OPENDATA","twrWaterDataUrl","Date","getTime","resWater","dataWater","ReservoirConditionData_OPENDATA","dataWaterReduced","d","originD","ObservationTime","latestWaterData","clear","consoleLog","bind","consoleError","isMacCatalyst","isPlatform","platform","from","arguments","apply","paddingTop","updateApp","getRegistrations","regs","all","reg","update","newReg","waiting","hasUpdates","reduce","prev","curr","documentElement","cssText","isTouchDevice","disableAndroidChromeCallout","stopPropagation","disableIosSafariCallout","s","getSelection","rangeCount","getRangeAt","removeAllRanges","setTimeout","addRange","clipboard","writeText","Bookmark","json","_ReservoirLiquidView","v4","updateLiquidIcon","prevProps","EffectiveWaterStorageCapacityPercent","EffectiveWaterStorageCapacity","liquidViewConfig","minValue","maxValue","circleThickness","circleFillGap","circleColor","waveHeight","waveCount","waveRiseTime","waveAnimateTime","waveRise","waveHeightScaling","waveAnimate","waveColor","waveOffset","textVertPosition","textSize","valueCountUp","displayPercent","textColor","waveTextColor","setEnoughColor","setShortageColor","elementId","gauge","d3","selectChildren","waveHeightScale","radius","Math","parseInt","locationX","locationY","fillPercent","range","domain","textPixels","textFinalValue","parseFloat","toFixed","textStartValue","percentText","fillCircleMargin","fillCircleRadius","waveLength","waveClipCount","waveClipWidth","textRounder","round","x","y","gaugeCircleX","PI","gaugeCircleY","waveScaleX","waveScaleY","waveRiseScale","waveAnimateScale","textRiseScaleY","gaugeGroup","append","attr","gaugeCircleArc","startAngle","endAngle","outerRadius","innerRadius","text1","clipArea","y0","sin","y1","waveGroup","wave","datum","fillCircleGroup","text2","textTween","textContent","t","transition","tween","waveGroupXPosition","animateWave","ease","on","newFinalValue","textRounderUpdater","newClipArea","newHeight","newWavePosition","loadLiquidFillGauge","date","toLocaleDateString","getHours","electronBackendApi","store","setupConfig","mode","swipeBackEnabled","_App","AppOrig","_AppOrig","registrationNew","originalAppSettingsStr","wakeLock","receive","send","oncontextmenu","ontouchend","queryParams","queryString","search","split","setting","showUpdateAlert","showRestoreAppSettingsToast","downloadModal","progress","speechSynthesis","getVoices","cancel","wakeLockScreen","visibilityState","wakeLockScreenRelease","request","release","routeMatches","exec","queryMatches","route","query","to","pathname","animated","path","exact","routeByQueryString","tab","water","postMessage","shareTextModal","restoreAppSettings","withRouter"],"mappings":"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","file":"static/js/main.d0bb05c8.chunk.js","sourcesContent":["import React from 'react';\nimport { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, IonList, IonItem, IonRange, IonIcon, IonLabel, IonToggle, IonButton, IonAlert, IonSelect, IonSelectOption, IonToast, withIonLifeCycle } from '@ionic/react';\nimport { connect } from 'react-redux';\nimport { RouteComponentProps } from 'react-router-dom';\nimport Globals from '../Globals';\nimport { helpCircle, text, colorPalette, bug, download, informationCircle } from 'ionicons/icons';\nimport './SettingsPage.css';\nimport PackageInfos from '../../package.json';\nimport { Settings } from '../models/Settings';\n\ninterface StateProps {\n  showBugReportAlert: boolean;\n  showClearAlert: boolean;\n  showToast: boolean;\n  toastMessage: string;\n  showLicense: boolean;\n}\n\ninterface Props {\n  dispatch: Function;\n  hasAppLog: boolean;\n  theme: number;\n  uiFontSize: number;\n  settings: Settings;\n  voiceURI: string;\n  speechRate: number;\n  mainVersion: string | null;\n  cbetaOfflineDbMode: boolean;\n}\n\ninterface PageProps extends Props, RouteComponentProps<{\n  tab: string;\n  path: string;\n  label: string;\n}> { }\n\nclass _SettingsPage extends React.Component<PageProps, StateProps> {\n  constructor(props: any) {\n    super(props);\n\n    this.state = {\n      showBugReportAlert: false,\n      showLicense: false,\n      showClearAlert: false,\n      showToast: false,\n      toastMessage: '',\n    };\n  }\n\n  ionViewWillEnter() {\n  }\n\n  reportText = '';\n  render() {\n    return (\n      <IonPage>\n        <IonHeader>\n          <IonToolbar>\n            <IonTitle className='uiFont'>設定</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n        <IonContent>\n          <IonList>\n            {/*\n            // Disable app update for Mac App Store submission.\n            <IonItem>\n              <IonIcon icon={shareSocial} slot='start' />\n              <IonLabel className='ion-text-wrap uiFont' onClick={async e => {\n                const hasUpdate = await Globals.updateApp();\n\n                if (!hasUpdate) {\n                  this.setState({ showToast: true, toastMessage: 'App 已是最新版' });\n                }\n              }}>PWA版本: <a href=\"https://github.com/MrMYHuang/twri#history\" target=\"_new\">{PackageInfos.pwaVersion}</a></IonLabel>\n              <IonButton fill='outline' shape='round' slot='end' size='large' style={{ fontSize: 'var(--ui-font-size)' }} onClick={e => {\n                this.props.dispatch({\n                  type: \"TMP_SET_KEY_VAL\",\n                  key: 'shareTextModal',\n                  val: {\n                    show: true,\n                    text: window.location.origin,\n                  },\n                });\n              }}>分享</IonButton>\n            </IonItem>\n            */}\n            <IonItem hidden={!this.props.mainVersion}>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={informationCircle} slot='start' />\n              <IonLabel className='ion-text-wrap uiFont'>Backend app 版本: {this.props.mainVersion}</IonLabel>\n              {/*<IonButton fill='outline' shape='round' slot='end' size='large' style={{ fontSize: 'var(--ui-font-size)' }} onClick={e => {\n              }}>分享</IonButton>*/}\n            </IonItem>\n            <IonItem>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={bug} slot='start' />\n              <IonLabel className='ion-text-wrap uiFont'><a href=\"https://github.com/MrMYHuang/twri#report\" target=\"_new\">啟用 app 異常記錄</a></IonLabel>\n              <IonToggle slot='end' checked={this.props.hasAppLog} onIonChange={e => {\n                const isChecked = e.detail.checked;\n\n                if (this.props.hasAppLog === isChecked) {\n                  return;\n                }\n\n                isChecked ? Globals.enableAppLog() : Globals.disableAppLog();\n                this.props.dispatch({\n                  type: \"SET_KEY_VAL\",\n                  key: 'hasAppLog',\n                  val: isChecked\n                });\n              }} />\n            </IonItem>\n            <IonItem hidden={!this.props.settings.hasAppLog}>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={bug} slot='start' />\n              <IonLabel className='ion-text-wrap uiFont'>回報 app 異常記錄</IonLabel>\n              <IonButton fill='outline' shape='round' slot='end' size='large' className='uiFont' onClick={e => {\n                this.reportText = \"瀏覽器：\" + navigator.userAgent + \"\\n\\nApp版本：\" + PackageInfos.pwaVersion + \"\\n\\nApp設定：\" + JSON.stringify(this.props.settings) + \"\\n\\nLog：\\n\" + Globals.getLog();\n                this.setState({ showBugReportAlert: true });\n              }}>回報</IonButton>\n              <IonAlert\n                cssClass='uiFont'\n                backdropDismiss={false}\n                isOpen={this.state.showBugReportAlert}\n                header={'異常回報'}\n                subHeader='輸入您的 E-mail，以後續聯絡'\n                inputs={[\n                  {\n                    name: 'name0',\n                    type: 'email',\n                    placeholder: '例：abc@example.com'\n                  },\n                  {\n                    name: 'name1',\n                    type: 'textarea',\n                    placeholder: '請描述發生步驟'\n                  },\n                ]}\n                buttons={[\n                  {\n                    text: '送出',\n                    cssClass: 'primary uiFont',\n                    handler: async (value) => {\n                      if (!/^\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/.test(value.name0)) {\n                        this.setState({ showBugReportAlert: false, showToast: true, toastMessage: `錯誤，E-mail 不符格式！` });\n                        return\n                      }\n\n                      try {\n                        Globals.axiosInstance.post(Globals.bugReportApiUrl, {\n                          subject: `${PackageInfos.productName}異常記錄回報`,\n                          text: `E-mail: ${value.name0}\\n\\n發生步驟: ${value.name1}\\n\\n${this.reportText}`,\n                        });\n                        this.setState({ showBugReportAlert: false, showToast: true, toastMessage: `異常回報成功` });\n                      } catch (error) {\n                        console.error(error);\n                        this.setState({ showBugReportAlert: false, showToast: true, toastMessage: `異常回報失敗` });\n                      }\n                    },\n                  },\n                  {\n                    text: '取消',\n                    role: 'cancel',\n                    cssClass: 'secondary uiFont',\n                    handler: () => this.setState({ showBugReportAlert: false }),\n                  },\n                ]}\n              />\n            </IonItem>\n            <IonItem>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={download} slot='start' />\n              <div className='contentBlock'>\n                <div style={{ flexDirection: 'column' }}>\n                  <IonLabel className='ion-text-wrap uiFont'>App 設定</IonLabel>\n                  <div style={{ textAlign: 'right' }}>\n                    <IonButton fill='outline' shape='round' size='large' style={{ fontSize: 'var(--ui-font-size)' }} onClick={async (e) => {\n                      const settingsJsonUri = `data:text/json;charset=utf-8,${encodeURIComponent(localStorage.getItem(Globals.storeFile) || '')}`;\n                      const a = document.createElement('a');\n                      a.href = settingsJsonUri;\n                      a.download = Globals.storeFile;\n                      a.click();\n                      a.remove();\n                    }}>匯出</IonButton>\n                    <input id='importJsonInput' type='file' accept='.json' style={{ display: 'none' }} onChange={async (ev) => {\n                      const file = ev.target.files?.item(0);\n                      const fileText = await file?.text() || '';\n                      try {\n                        // JSON text validation.\n                        JSON.parse(fileText);\n                        localStorage.setItem(Globals.storeFile, fileText);\n                        this.props.dispatch({ type: 'LOAD_SETTINGS' });\n                      } catch (e) {\n                        console.error(e);\n                        console.error(new Error().stack);\n                      }\n                      (document.getElementById('importJsonInput') as HTMLInputElement).value = '';\n                    }} />\n\n                    <IonButton fill='outline' shape='round' size='large' style={{ fontSize: 'var(--ui-font-size)' }} onClick={(e) => {\n                      (document.querySelector('#importJsonInput') as HTMLInputElement).click();\n                    }}>匯入</IonButton>\n                    <IonButton fill='outline' shape='round' size='large' style={{ fontSize: 'var(--ui-font-size)' }} onClick={(e) => {\n                      this.setState({ showClearAlert: true });\n                    }}>重置</IonButton>\n                    <IonAlert\n                      cssClass='uiFont'\n                      isOpen={this.state.showClearAlert}\n                      backdropDismiss={false}\n                      onDidPresent={(ev) => {\n                      }}\n                      header={'重置會還原 app 設定預設值並清除書籤！確定重置？'}\n                      buttons={[\n                        {\n                          text: '取消',\n                          cssClass: 'primary uiFont',\n                          handler: (value) => {\n                            this.setState({\n                              showClearAlert: false,\n                            });\n                          },\n                        },\n                        {\n                          text: '重置',\n                          cssClass: 'secondary uiFont',\n                          handler: async (value) => {\n                            await Globals.clearAppData();\n                            this.props.dispatch({ type: 'DEFAULT_SETTINGS' });\n                            this.setState({ showClearAlert: false, showToast: true, toastMessage: \"清除成功!\" });\n                          },\n                        }\n                      ]}\n                    />\n                  </div>\n                </div>\n              </div>\n            </IonItem>\n            <IonItem>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={colorPalette} slot='start' />\n              <IonLabel className='ion-text-wrap uiFont'>{Globals.appSettings['iconSize']}</IonLabel>\n              <IonSelect slot='end'\n                value={+this.props.settings.iconSize}\n                style={{ fontSize: 'var(--ui-font-size)' }}\n                interface='popover'\n                interfaceOptions={{ cssClass: 'twrithemes' }}\n                onIonChange={e => {\n                  const value = +e.detail.value;\n                  // Important! Because it can results in rerendering of this component but\n                  // store states (this.props) of this component is not updated yet! And IonSelect value will be changed\n                  // back to the old value and onIonChange will be triggered again!\n                  // Thus, we use this check to ignore this invalid change.\n                  if (+this.props.settings.iconSize === value) {\n                    return;\n                  }\n\n                  this.props.dispatch({\n                    type: \"SET_KEY_VAL\",\n                    key: 'iconSize',\n                    val: value,\n                  });\n                }}>\n                <IonSelectOption className='uiFont' value={125}>小</IonSelectOption>\n                <IonSelectOption className='uiFont' value={250}>中</IonSelectOption>\n                <IonSelectOption className='uiFont' value={500}>大</IonSelectOption>\n              </IonSelect>\n            </IonItem>\n            <IonItem>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={colorPalette} slot='start' />\n              <IonLabel className='ion-text-wrap uiFont'>{Globals.appSettings['theme']}</IonLabel>\n              <IonSelect slot='end'\n                value={+this.props.theme}\n                style={{ fontSize: 'var(--ui-font-size)' }}\n                interface='popover'\n                interfaceOptions={{ cssClass: 'twrithemes' }}\n                onIonChange={e => {\n                  const value = +e.detail.value;\n                  // Important! Because it can results in rerendering of this component but\n                  // store states (this.props) of this component is not updated yet! And IonSelect value will be changed\n                  // back to the old value and onIonChange will be triggered again!\n                  // Thus, we use this check to ignore this invalid change.\n                  if (+this.props.theme === value) {\n                    return;\n                  }\n\n                  this.props.dispatch({\n                    type: \"SET_KEY_VAL\",\n                    key: 'theme',\n                    val: value,\n                  });\n                }}>\n                <IonSelectOption className='uiFont cbeta' value={0}>綠底</IonSelectOption>\n                <IonSelectOption className='uiFont dark' value={1}>暗色</IonSelectOption>\n                <IonSelectOption className='uiFont light' value={2}>亮色</IonSelectOption>\n                <IonSelectOption className='uiFont oldPaper' value={3}>舊書</IonSelectOption>\n                <IonSelectOption className='uiFont marble' value={4}>大理石</IonSelectOption>\n              </IonSelect>\n            </IonItem>\n            <IonItem>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={text} slot='start' />\n              <div className=\"contentBlock\">\n                <div style={{ flexDirection: \"column\" }}>\n                  <IonLabel className='ion-text-wrap uiFont'>{Globals.appSettings['uiFontSize']}: {this.props.uiFontSize}</IonLabel>\n                  <IonRange min={12} max={32} pin={true} snaps={true} value={this.props.uiFontSize} onIonChange={e => {\n                    this.props.dispatch({\n                      type: \"SET_KEY_VAL\",\n                      key: 'uiFontSize',\n                      val: +e.detail.value,\n                    });\n                    this.props.settings.uiFontSize = +e.detail.value;\n                    Globals.updateCssVars(this.props.settings);\n                  }} />\n                </div>\n              </div>\n            </IonItem>\n            <IonItem>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={text} slot='start' />\n              <div className=\"contentBlock\">\n                <IonLabel className='ion-text-wrap uiFont'>{Globals.appSettings['textFontSize']}: <span className='textFont'>{this.props.settings.textFontSize}</span></IonLabel>\n                <IonRange min={12} max={32} pin={true} snaps={true} value={this.props.settings.textFontSize} onIonChange={e => {\n                  this.props.dispatch({\n                    type: \"SET_KEY_VAL\",\n                    key: 'textFontSize',\n                    val: +e.detail.value,\n                  });\n                  this.props.settings.textFontSize = +e.detail.value;\n                  Globals.updateCssVars(this.props.settings);\n                }} />\n              </div>\n            </IonItem>\n            <IonItem>\n              <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n              <IonIcon icon={helpCircle} slot='start' />\n              <div style={{ fontSize: 'var(--ui-font-size)' }}>\n                <div>關於</div>\n                <div><a href=\"https://github.com/MrMYHuang/twri\" target=\"_new\">操作說明與開放原始碼</a></div>\n                <div><a href='/' onClick={e => {\n                  e.preventDefault();\n                  this.setState({ showLicense: true });\n                }}>第三方版權聲明 (國家發展委員會信箱：opendata@ndc.gov.tw)</a></div>\n                <div>作者: Meng-Yuan Huang</div>\n                <div><a href=\"mailto:myh@live.com\" target=\"_new\">myh@live.com</a></div>\n              </div>\n            </IonItem>\n          </IonList>\n          <IonAlert\n            isOpen={this.state.showLicense}\n            cssClass='uiFontX0_8'\n            backdropDismiss={false}\n            message=\"此 app 使用《水庫每日營運狀況》(https://data.gov.tw/dataset/41568)、《水庫水情資料》(https://data.gov.tw/dataset/45501)。此開放資料依政府資料開放授權條款 (Open Government Data License) 進行公眾釋出，使用者於遵守本條款各項規定之前提下，得利用之。政府資料開放授權條款：https://data.gov.tw/license\"\n            buttons={[\n              {\n                text: '關閉',\n                cssClass: 'primary uiFont',\n                handler: (value) => {\n                  this.setState({\n                    showLicense: false,\n                  });\n                },\n              },\n              {\n                text: '開啟授權',\n                cssClass: 'secondary uiFont',\n                handler: (value) => {\n                  this.setState({\n                    showLicense: false,\n                  });\n                  window.open('https://data.gov.tw/license');\n                },\n              }\n            ]}\n          />\n\n          <IonToast\n            cssClass='uiFont'\n            isOpen={this.state.showToast}\n            onDidDismiss={() => this.setState({ showToast: false })}\n            message={this.state.toastMessage}\n            duration={2000}\n          />\n        </IonContent>\n      </IonPage >\n    );\n  }\n};\n\nconst mapStateToProps = (state: any /*, ownProps*/) => {\n  return {\n    settings: state.settings,\n    hasAppLog: state.settings.hasAppLog,\n    theme: state.settings.theme,\n    uiFontSize: state.settings.uiFontSize,\n    speechRate: state.settings.speechRate,\n    voiceURI: state.settings.voiceURI,\n    mainVersion: state.tmpSettings.mainVersion,\n  }\n};\n\nconst SettingsPage = withIonLifeCycle(_SettingsPage);\n\nexport default connect(\n  mapStateToProps,\n)(SettingsPage);\n","import React from 'react';\nimport { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, withIonLifeCycle, IonToast, IonButton, IonIcon, IonLoading, IonAlert } from '@ionic/react';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport Globals from '../Globals';\nimport ReservoirLiquidView from '../components/ReservoirLiquidView';\nimport './Home.css';\nimport { bulb, refresh, shareSocial, information } from 'ionicons/icons';\nimport { Settings } from '../models/Settings';\nimport { Bookmark } from '../models/Bookmark';\nimport { TmpSettings } from '../models/TmpSettings';\n\ninterface Props {\n  dispatch: Function;\n  fontSize: number;\n  settings: Settings;\n  tmpSettings: TmpSettings;\n}\n\ninterface State {\n  showInfo: boolean;\n  showToast: boolean;\n  toastMessage: string;\n  addBookmarkAlert: boolean;\n}\n\ninterface PageProps extends Props, RouteComponentProps<{\n  tab: string;\n  path: string;\n}> { }\n\nconst helpDoc = <>\n  <div style={{ fontSize: 'var(--ui-font-size)', textAlign: 'center' }}><a href=\"https://github.com/MrMYHuang/twri#web-app\" target=\"_new\">程式安裝說明</a></div>\n</>;\n\nclass _HomePage extends React.Component<PageProps, State> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      showInfo: false,\n      showToast: false,\n      toastMessage: '',\n      addBookmarkAlert: false,\n    }\n  }\n\n  ionViewWillEnter() {\n  }\n\n  clickedBookmark: Bookmark | undefined;\n  getReservoirInfos() {\n    const reservoirs = this.props.settings.showAllReservoirs ? this.props.tmpSettings.reservoirs : this.props.tmpSettings.reservoirs.filter(v => v.EffectiveCapacity > 1000);\n    return reservoirs.map((info) =>\n      <ReservoirLiquidView key={`HomeReservoirLiquidView${info.ReservoirIdentifier}`}\n        {...{\n          info: info,\n          onIconClick: (bookmark: Bookmark) => {\n            this.clickedBookmark = bookmark;\n            this.setState({ addBookmarkAlert: true });\n          },\n          ...this.props\n        }} />\n    );\n  }\n\n  render() {\n    return (\n      <IonPage>\n        <IonHeader>\n          <IonToolbar>\n            <IonTitle style={{ fontSize: 'var(--ui-font-size)' }}>水庫</IonTitle>\n\n            <IonButton fill=\"clear\" slot='end' onClick={e => {\n              this.setState({ showInfo: true });\n            }}>\n              <IonIcon icon={information} slot='icon-only' />\n            </IonButton>\n\n            <IonButton fill={this.props.settings.showAllReservoirs ? 'solid' : 'clear'} slot='end' onClick={e => {\n              this.props.dispatch({\n                type: \"SET_KEY_VAL\",\n                key: 'showAllReservoirs',\n                val: !this.props.settings.showAllReservoirs,\n              });\n            }}>\n              <IonIcon icon={bulb} slot='icon-only' />\n            </IonButton>\n\n            <IonButton fill=\"clear\" slot='end' onClick={e => {\n              Globals.fetchData(this.props.dispatch);\n            }}>\n              <IonIcon icon={refresh} slot='icon-only' />\n            </IonButton>\n\n            <IonButton fill=\"clear\" slot='end' onClick={e => {\n              this.props.dispatch({\n                type: \"TMP_SET_KEY_VAL\",\n                key: 'shareTextModal',\n                val: {\n                  show: true,\n                  text: decodeURIComponent(window.location.href),\n                },\n              });\n            }}>\n              <IonIcon icon={shareSocial} slot='icon-only' />\n            </IonButton>\n          </IonToolbar>\n        </IonHeader>\n        <IonContent>\n\n          {this.props.tmpSettings.isLoading ?\n            <IonLoading\n              cssClass='uiFont'\n              isOpen={this.props.tmpSettings.isLoading}\n              message={'載入中...'}\n            />\n            :\n            this.props.tmpSettings.fetchError ?\n              Globals.fetchErrorContent\n              :\n              <div className='ReservoirList'>\n                {this.getReservoirInfos()}\n              </div>\n          }\n\n          {helpDoc}\n\n          <IonAlert\n            cssClass='uiFont'\n            isOpen={this.state.showInfo}\n            backdropDismiss={false}\n            header={'有效蓄水量單位：萬立方公尺'}\n            buttons={[\n              {\n                text: '關閉',\n                cssClass: 'primary uiFont',\n                handler: (value) => {\n                  this.setState({\n                    showInfo: false,\n                  });\n                },\n              }\n            ]}\n          />\n\n          <IonAlert\n            cssClass='uiFont'\n            isOpen={this.state.addBookmarkAlert}\n            backdropDismiss={false}\n            header={'確定新增至書籤？'}\n            buttons={[\n              {\n                text: '取消',\n                cssClass: 'primary uiFont',\n                handler: (value) => {\n                  this.setState({\n                    addBookmarkAlert: false,\n                  });\n                },\n              },\n              {\n                text: '確定',\n                cssClass: 'secondary uiFont',\n                handler: (value) => {\n                  this.props.dispatch({\n                    type: \"ADD_BOOKMARK\",\n                    bookmark: this.clickedBookmark,\n                  });\n                  this.setState({ addBookmarkAlert: false, showToast: true, toastMessage: '新增書籤成功！' });\n                },\n              }\n            ]}\n          />\n\n          <IonToast\n            cssClass='uiFont'\n            isOpen={this.state.showToast}\n            onDidDismiss={() => this.setState({ showToast: false })}\n            message={this.state.toastMessage}\n            duration={2000}\n          />\n        </IonContent>\n      </IonPage>\n    );\n  }\n};\n\nconst mapStateToProps = (state: any /*, ownProps*/) => {\n  return {\n    tmpSettings: state.tmpSettings,\n    settings: state.settings\n  }\n};\n\n//const mapDispatchToProps = {};\n\nconst HomePage = withIonLifeCycle(_HomePage);\n\nexport default connect(\n  mapStateToProps,\n)(HomePage);\n","import React from 'react';\nimport { IonButton, IonContent, IonItem, IonLabel, IonList, IonModal, IonToggle } from '@ionic/react';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport Globals from '../Globals';\nimport * as qrcode from 'qrcode';\n\ninterface Props {\n  showModal: boolean;\n  text: string;\n  finish: Function;\n  settings: any;\n}\n\ninterface PageProps extends Props, RouteComponentProps<{\n  tab: string;\n  path: string;\n}> { }\n\ninterface State {\n  isAppSettingsExport: Array<boolean>;\n}\n\nclass _ShareTextModal extends React.Component<PageProps, State> {\n\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      isAppSettingsExport: Array<boolean>(Object.keys(Globals.appSettings).length)\n    }\n  }\n\n  updateQrCode() {\n    const appSettingsExport = Object.keys(Globals.appSettings).filter((key, i) => this.state.isAppSettingsExport[i]).map((key, i) => { return { key: key, val: this.props.settings[key] }; });\n    let appSettingsString: string | null = appSettingsExport.map(keyVal => `${keyVal.key}=${+keyVal.val}`).join(',');\n    appSettingsString = appSettingsString !== '' ? `settings=${appSettingsString}` : null;\n    let appUrl = this.props.text;\n    const hasQueryString = /\\?/.test(appUrl);\n    if (appSettingsString) {\n      appUrl += hasQueryString ? `&${appSettingsString}` : `?${appSettingsString}`;\n    }\n\n    Globals.copyToClipboard(appUrl);\n    const qrcCanvas = document.getElementById('qrcCanvas');\n    qrcode.toCanvas(qrcCanvas, appUrl);\n    return qrcCanvas;\n  }\n\n  render() {\n    return (\n      <IonModal\n        isOpen={this.props.showModal}\n        cssClass='uiFont'\n        swipeToClose={true}\n        //presentingElement={router || undefined}\n        onWillPresent={() => {\n          let isAppSettingsExport: Array<boolean> = [];\n          for (let i = 0; i < this.state.isAppSettingsExport.length; i++) {\n            isAppSettingsExport.push(false);\n          }\n          this.setState({ isAppSettingsExport: isAppSettingsExport }, () => {\n            this.updateQrCode();\n          });\n        }}\n        onDidDismiss={() => this.props.finish()}>\n        <IonContent>\n          <div style={{ display: 'flex', flexDirection: 'column', height: '100%', alignItems: 'center' }}>\n            <div>\n              <IonLabel className='uiFont'>此頁app連結已複製至剪貼簿！</IonLabel>\n            </div>\n            <div>\n              <IonLabel className='uiFont'>也可以使用QR Code分享:</IonLabel>\n            </div>\n            <div style={{ flexGrow: 1, flexShrink: 0, display: 'flex', alignItems: 'center', margin: 10 }}>\n              <canvas id='qrcCanvas' width='500' height='500' style={{ margin: '0px auto' }} />\n            </div>\n            <div>\n              <IonLabel className='uiFont'>包括app設定:</IonLabel>\n              <IonList>\n                {\n                  Object.keys(Globals.appSettings).map((key, i) =>\n                    <IonItem key={`appSettingExportItem_${i}`}>\n                      <IonLabel className='ion-text-wrap uiFont'>{Globals.appSettings[key]}</IonLabel>\n                      <IonToggle slot='end' onIonChange={e => {\n                        const isAppSettingsExport = this.state.isAppSettingsExport;\n                        isAppSettingsExport[i] = e.detail.checked;\n                        this.setState({ isAppSettingsExport: isAppSettingsExport }, () => {\n                          this.updateQrCode();\n                        });\n                      }} />\n                    </IonItem>\n                  )\n                }\n              </IonList>\n            </div>\n            <div>\n              <IonButton fill='outline' shape='round' size='large' onClick={() => this.props.finish()}>關閉</IonButton>\n            </div>\n          </div>\n        </IonContent>\n      </IonModal>\n    );\n  }\n};\n\nconst mapStateToProps = (state: any /*, ownProps*/) => {\n  return {\n    settings: state.settings,\n  }\n};\n\n//const mapDispatchToProps = {};\n\nexport default connect(\n  mapStateToProps,\n)(_ShareTextModal);\n","import React from 'react';\nimport { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, IonList, IonReorderGroup, IonReorder, IonItem, IonLabel, withIonLifeCycle, IonItemSliding, IonItemOptions, IonItemOption, IonIcon, IonButton, IonToast, IonLoading } from '@ionic/react';\nimport { ItemReorderEventDetail } from '@ionic/core';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { Bookmark } from '../models/Bookmark';\nimport { refresh, swapVertical } from 'ionicons/icons';\nimport Globals from '../Globals';\nimport { Settings } from '../models/Settings';\nimport ReservoirLiquidView from '../components/ReservoirLiquidView';\nimport { TmpSettings } from '../models/TmpSettings';\nimport { DailyOperationalStatisticsOfReservoir } from '../models/DailyOperationalStatisticsOfReservoir';\n\ninterface Props {\n  dispatch: Function;\n  bookmarks: [Bookmark];\n  tmpSettings: TmpSettings;\n  settings: Settings;\n  fontSize: number;\n}\n\ninterface State {\n  reorder: boolean;\n  showToast: boolean;\n  toastMessage: string;\n}\n\ninterface PageProps extends Props, RouteComponentProps<{\n  tab: string;\n  path: string;\n}> { }\n\nconst helpDoc = Globals.isStoreApps() ?\n  <></>\n  :\n  <>\n    <div style={{ fontSize: 'var(--ui-font-size)', textAlign: 'center' }}><a href=\"https://github.com/MrMYHuang/twdi#web-app\" target=\"_new\">程式安裝說明</a></div>\n    <div style={{ fontSize: 'var(--ui-font-size)', textAlign: 'center' }}><a href=\"https://github.com/MrMYHuang/twdi#shortcuts\" target=\"_new\">程式捷徑</a></div>\n  </>;\n\nclass _BookmarkPage extends React.Component<PageProps, State> {\n  bookmarkListRef: React.RefObject<HTMLIonListElement>;\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      reorder: false,\n      showToast: false,\n      toastMessage: '',\n    }\n    this.bookmarkListRef = React.createRef<HTMLIonListElement>();\n  }\n\n  ionViewWillEnter() {\n    if (!this.hasBookmark) {\n      this.setState({ showToast: true, toastMessage: '無書籤！請至水庫頁新增任一水庫至書籤。' });\n      this.props.history.push(`${Globals.pwaUrl}/home`);\n    }\n    //console.log( 'view will enter' );\n  }\n\n  get hasBookmark() {\n    return this.props.bookmarks.length > 0;\n  }\n\n  delBookmarkHandler(uuidStr: string) {\n    this.props.dispatch({\n      type: \"DEL_BOOKMARK\",\n      ReservoirIdentifier: uuidStr,\n    });\n\n    setImmediate(() => {\n      if (!this.hasBookmark) {\n        this.setState({ showToast: true, toastMessage: '無書籤！請搜尋藥品並加至書籤。' });\n        this.props.history.push(`${Globals.pwaUrl}/home`);\n      }\n    });\n  }\n\n  reorderBookmarks(event: CustomEvent<ItemReorderEventDetail>) {\n    const bookmarks = event.detail.complete(this.props.bookmarks);\n    this.props.dispatch({\n      type: \"UPDATE_BOOKMARKS\",\n      bookmarks: bookmarks,\n    });\n  }\n\n  getBookmarkRows() {\n    let bookmarks = this.props.bookmarks;\n    let rows = Array<object>();\n    bookmarks.forEach((bookmark, i) => {\n      let label = `${bookmark.ReservoirName}`;\n      rows.push(\n        <IonItemSliding key={`bookmarkItemSliding_` + i}>\n          <IonItem key={`bookmarkItem_` + i} button={true}>\n            <div tabIndex={0}></div>{/* Workaround for macOS Safari 14 bug. */}\n            <IonLabel className='ion-text-wrap uiFont' key={`bookmarkItemLabel_` + i}>\n              {label}\n            </IonLabel>\n            <IonReorder slot='end' />\n          </IonItem>\n\n          <IonItemOptions side=\"end\">\n            <IonItemOption style={{ fontSize: 'var(--ui-font-size)' }} color='danger' onClick={(e) => {\n              this.delBookmarkHandler(bookmark.ReservoirIdentifier);\n              this.bookmarkListRef.current?.closeSlidingItems();\n            }}>刪除</IonItemOption>\n          </IonItemOptions>\n        </IonItemSliding>\n      );\n    });\n    return rows;\n  }\n\n  getReservoirInfos() {\n    const reservoirs = this.props.settings.bookmarks.map(b => this.props.tmpSettings.reservoirs.find(r => b.ReservoirIdentifier === r.ReservoirIdentifier)).filter(r => r !== undefined) as DailyOperationalStatisticsOfReservoir[];\n    return reservoirs.map((info) =>\n      <ReservoirLiquidView key={`BookmarkReservoirLiquidView${info.ReservoirIdentifier}`}\n        {...{\n          info: info,\n          onIconClick: (bookmark: Bookmark) => {\n            // Do nothing.\n          },\n          ...this.props\n        }} />\n    );\n  }\n\n  render() {\n    const rows = this.getBookmarkRows();\n\n    return (\n      <IonPage>\n        <IonHeader>\n          <IonToolbar>\n            <IonTitle className='uiFont'>書籤</IonTitle>\n\n            <IonButton fill=\"clear\" slot='end' onClick={e => {\n              Globals.fetchData(this.props.dispatch);\n            }}>\n              <IonIcon icon={refresh} slot='icon-only' />\n            </IonButton>\n\n            <IonButton fill={this.state.reorder ? 'solid' : 'clear'} slot='end'\n              onClick={ev => this.setState({ reorder: !this.state.reorder })}>\n              <IonIcon icon={swapVertical} slot='icon-only' />\n            </IonButton>\n          </IonToolbar>\n        </IonHeader>\n        <IonContent>\n          {\n            this.props.tmpSettings.isLoading ?\n              <IonLoading\n                cssClass='uiFont'\n                isOpen={this.props.tmpSettings.isLoading}\n                message={'載入中...'}\n              />\n              :\n              this.props.tmpSettings.fetchError ?\n                Globals.fetchErrorContent\n                :\n                this.hasBookmark ?\n                  this.state.reorder ?\n                    <>\n                      <IonList key='bookmarkList0' ref={this.bookmarkListRef}>\n                        <IonReorderGroup disabled={!this.state.reorder} onIonItemReorder={(event: CustomEvent<ItemReorderEventDetail>) => { this.reorderBookmarks(event); }}>\n                          {rows}\n                        </IonReorderGroup>\n                      </IonList>\n                      {helpDoc}\n                    </>\n                    :\n                    <>\n                      <div className='ReservoirList'>\n                        {this.getReservoirInfos()}\n                      </div>\n                      {helpDoc}\n                    </>\n                  :\n                  <>\n                    <IonList key='bookmarkList1'>\n                      {rows}\n                    </IonList>\n                    {helpDoc}\n                  </>\n          }\n\n          <IonToast\n            cssClass='uiFont'\n            isOpen={this.state.showToast}\n            onDidDismiss={() => this.setState({ showToast: false })}\n            message={this.state.toastMessage}\n            duration={2000}\n          />\n        </IonContent>\n      </IonPage>\n    );\n  }\n};\n\nconst mapStateToProps = (state: any /*, ownProps*/) => {\n  return {\n    bookmarks: state.settings.bookmarks,\n    settings: state.settings,\n    tmpSettings: state.tmpSettings,\n  }\n};\n\n//const mapDispatchToProps = {};\n\nconst BookmarkPage = withIonLifeCycle(_BookmarkPage);\n\nexport default connect(\n  mapStateToProps,\n)(BookmarkPage);\n","import { Bookmark } from \"./Bookmark\";\n\nexport class Settings {\n    version: number = 1;\n    hasAppLog: boolean = true;\n    theme: number = 1;\n    uiFontSize: number = 24;\n    textFontSize: number = 24;\n    showAllReservoirs: boolean = false;\n    iconSize: number = 250;\n    bookmarks: Bookmark[] = [];\n}\n","import Globals from '../../Globals';\nimport { Settings } from '../../models/Settings';\n\nfunction updateUi(newSettings: Settings) {\n  while (document.body.classList.length > 0) {\n    document.body.classList.remove(document.body.classList.item(0)!);\n  }\n  document.body.classList.toggle(`theme${newSettings.theme}`, true);\n  Globals.updateCssVars(newSettings);\n}\n\n// Used to store settings. They will be saved to file.\nexport default function reducer(state = new Settings(), action: any) {\n  var newSettings = { ...state };\n  switch (action.type) {\n    case \"ADD_BOOKMARK\":\n      newSettings.bookmarks = [...newSettings.bookmarks, action.bookmark];\n      localStorage.setItem(Globals.storeFile, JSON.stringify({ settings: newSettings }));\n      break;\n    case \"DEL_BOOKMARK\": {\n      let bookmarksTemp = newSettings.bookmarks;\n      const idxToDel = bookmarksTemp.findIndex((b) => { return b.ReservoirIdentifier === action.ReservoirIdentifier });\n      if (idxToDel !== -1) {\n        bookmarksTemp.splice(idxToDel, 1);\n      }\n      newSettings.bookmarks = [...bookmarksTemp];\n      localStorage.setItem(Globals.storeFile, JSON.stringify({ settings: newSettings }));\n      break;\n    }\n    case \"LOAD_SETTINGS\":\n      newSettings = JSON.parse(localStorage.getItem(Globals.storeFile)!).settings;\n      updateUi(newSettings);\n      break;\n    case \"SET_KEY_VAL\":\n      var key = action.key;\n      var val = action.val;\n      switch (key) {\n        case 'theme': {\n          document.body.classList.forEach((val) => {\n            if (/theme/.test(val)) {\n              document.body.classList.remove(val);\n            }\n          });\n          document.body.classList.toggle(`theme${val}`, true);\n          break;\n        }\n      }\n\n      (newSettings as any)[key] = val;\n      localStorage.setItem(Globals.storeFile, JSON.stringify({ settings: newSettings }));\n      break;\n    // @ts-ignore\n    case \"DEFAULT_SETTINGS\":\n      newSettings = new Settings();\n      updateUi(newSettings);\n      break;\n    // eslint-disable-next-line\n    default:\n      if (Object.keys(newSettings).length === 0) {\n        newSettings = new Settings();\n      }\n      const defaultSettings = new Settings();\n      Object.keys(defaultSettings).forEach(key => {\n        if ((newSettings as any)[key] === undefined) {\n          (newSettings as any)[key] = (defaultSettings as any)[key];\n        }\n      });\n  }\n  return newSettings;\n}\n","import { combineReducers } from \"redux\"\n\nimport settings from \"./setReducer\"\nimport tmpSettings from \"./tmpSetReducer\"\n\nexport default combineReducers({\n  settings, tmpSettings\n})\n","// Used to store temp settings in RAM. They will not be saved to file.\nexport default function reducer(state = {\n}, action: any) {\n  var newState = { ...state } as any;\n  var key = action.key;\n  var val = action.val;\n  newState[key] = val;\n  switch (action.type) {\n    case \"TMP_SET_KEY_VAL\": {\n      return newState;\n    }\n    default:\n      break;\n  }\n  return state;\n}\n","import { /*applyMiddleware,*/ createStore, Store } from \"redux\";\n\n//import { logger } from \"redux-logger\"\n//import thunk from \"redux-thunk\"\n//import promise from \"redux-promise-middleware\"\n\nimport reducer from \"./reducers\";\nimport Globals from \"../Globals\";\n\n//const middleware = applyMiddleware(promise(), thunk, logger)\n\nvar savedStore: Store;\n\nexport default function getSavedStore() {\n    var savedSettingsStr = localStorage.getItem(Globals.storeFile);\n    if (savedSettingsStr != null) {\n        savedStore = createStore(reducer, JSON.parse(savedSettingsStr));//, middleware)\n    }\n    else {\n        savedStore = createStore(reducer);//, middleware)\n    }\n\n    return savedStore;\n}\n","var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t275,\n\t\t5\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t276,\n\t\t6\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t277,\n\t\t7\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t278,\n\t\t17\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t279,\n\t\t18\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t280,\n\t\t43\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t281,\n\t\t19\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t282,\n\t\t20\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t283,\n\t\t21\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t284,\n\t\t22\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t285,\n\t\t44\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t286,\n\t\t10\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t287,\n\t\t23\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t288,\n\t\t45\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t289,\n\t\t46\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t290,\n\t\t24\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t291,\n\t\t25\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t292,\n\t\t26\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t293,\n\t\t27\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t294,\n\t\t28\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t295,\n\t\t8\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t296,\n\t\t14\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t297,\n\t\t9\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t298,\n\t\t29\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t299,\n\t\t30\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t300,\n\t\t31\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t301,\n\t\t11\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t302,\n\t\t16\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t303,\n\t\t47\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t304,\n\t\t32\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t305,\n\t\t33\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t306,\n\t\t34\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t307,\n\t\t35\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t308,\n\t\t48\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t309,\n\t\t13\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t310,\n\t\t49\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t311,\n\t\t36\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t312,\n\t\t15\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t313,\n\t\t37\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t314,\n\t\t38\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t315,\n\t\t39\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t316,\n\t\t12\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t317,\n\t\t50\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 197;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t318,\n\t\t57\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 199;\nmodule.exports = webpackAsyncContext;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.0/8 are considered localhost for IPv4.\n  window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n            'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      /*\n      if(registration.waiting) {\n        const reg = registration.waiting;\n        reg.postMessage({ type: 'SKIP_WAITING' });\n        alert('Skip waiting.');\n      }*/\n\n      registration.onupdatefound = () => {\n        //alert('onupdatefound.');\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          console.log(`installingWorker stage changed: ${installingWorker.state}`);\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from \"react-router-dom\";\nimport App, {serviceWorkCallbacks} from './App';\nimport Globals from './Globals';\nimport * as serviceWorker from './serviceWorkerRegistration';\n\n// Enable at the very start for logging most messages.\nGlobals.enableAppLog();\n\nReactDOM.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register({\n    onSuccess: (registration: ServiceWorkerRegistration) => { console.log('Precache app loaded!'); serviceWorkCallbacks.onSuccess(registration); },\n    onUpdate: (registration: ServiceWorkerRegistration) => { console.log('Found app updated!'); serviceWorkCallbacks.onUpdate(registration); },\n});\n","import axios from 'axios';\nimport { isPlatform, IonLabel } from '@ionic/react';\nimport { DailyOperationalStatisticsOfReservoir } from './models/DailyOperationalStatisticsOfReservoir';\nimport { ReservoirConditionData } from './models/ReservoirConditionData';\nimport { Settings } from './models/Settings';\n\nconst pwaUrl = process.env.PUBLIC_URL || '';\nconst bugReportApiUrl = 'https://vh6ud1o56g.execute-api.ap-northeast-1.amazonaws.com/bugReportMailer';\nlet twrDataUrl = `https://myhdata.s3.ap-northeast-1.amazonaws.com/twrData.json`;\nlet twrWaterDataUrl = `https://myhdata.s3.ap-northeast-1.amazonaws.com/twrDataWater.json`;\n\nconst axiosInstance = axios.create({\n  baseURL: twrDataUrl,\n  timeout: 8000,\n});\n\nasync function fetchData(dispatch: Function) {\n  dispatch({\n    type: \"TMP_SET_KEY_VAL\",\n    key: 'isLoading',\n    val: true,\n  });\n  try {\n    let obj: any;\n    const res = await axiosInstance.get(twrDataUrl, {\n      responseType: 'arraybuffer',\n    });\n    obj = JSON.parse(new TextDecoder().decode(res.data)) as any;\n    let data = obj.DailyOperationalStatisticsOfReservoirs_OPENDATA as DailyOperationalStatisticsOfReservoir[];\n\n    const resWater = await Globals.axiosInstance.get(Globals.twrWaterDataUrl + `?timeStamp=${new Date().getTime()}`, {\n      responseType: 'arraybuffer',\n    });\n    obj = JSON.parse(new TextDecoder().decode(resWater.data)) as any;\n    let dataWater = obj.ReservoirConditionData_OPENDATA as ReservoirConditionData[];\n\n    let dataWaterReduced: any = {};\n    dataWater.forEach((d) => {\n      if (dataWaterReduced[d.ReservoirIdentifier] == null) {\n        dataWaterReduced[d.ReservoirIdentifier] = d;\n        return;\n      }\n\n      const originD = dataWaterReduced[d.ReservoirIdentifier] as ReservoirConditionData;\n      if (new Date(originD.ObservationTime) < new Date(d.ObservationTime)) {\n        dataWaterReduced[d.ReservoirIdentifier] = d;\n      }\n    });\n\n    data.forEach((d) => {\n      if (dataWaterReduced[d.ReservoirIdentifier] != null) {\n        d.latestWaterData = dataWaterReduced[d.ReservoirIdentifier];\n      }\n    });\n\n    dispatch({\n      type: \"TMP_SET_KEY_VAL\",\n      key: 'reservoirs',\n      val: data,\n    });\n  } catch (error) {\n    dispatch({\n      type: \"TMP_SET_KEY_VAL\",\n      key: 'fetchError',\n      val: true,\n    });\n  }\n  dispatch({\n    type: \"TMP_SET_KEY_VAL\",\n    key: 'isLoading',\n    val: false,\n  });\n}\n\nlet log = '';\n\nasync function clearAppData() {\n  localStorage.clear();\n}\n\n//const electronBackendApi: any = (window as any).electronBackendApi;\n\nconst consoleLog = console.log.bind(console);\nconst consoleError = console.error.bind(console);\n\nfunction getLog() {\n  return log;\n}\n\nfunction enableAppLog() {\n  console.log = function () {\n    log += '----- Info ----\\n';\n    log += (Array.from(arguments)) + '\\n';\n    consoleLog.apply(console, arguments as any);\n  };\n\n  console.error = function () {\n    log += '----- Error ----\\n';\n    log += (Array.from(arguments)) + '\\n';\n    consoleError.apply(console, arguments as any);\n  };\n}\n\nfunction disableAppLog() {\n  log = '';\n  console.log = consoleLog;\n  console.error = consoleError;\n}\n\nfunction disableAndroidChromeCallout(event: any) {\n  event.preventDefault();\n  event.stopPropagation();\n  return false;\n}\n\n// Workable but imperfect.\nfunction disableIosSafariCallout(this: Window, event: any) {\n  const s = this.getSelection();\n  if ((s?.rangeCount || 0) > 0) {\n    const r = s?.getRangeAt(0);\n    s?.removeAllRanges();\n    setTimeout(() => {\n      s?.addRange(r!);\n    }, 50);\n  }\n}\n\nfunction copyToClipboard(text: string) {\n  try {\n    navigator.clipboard && navigator.clipboard.writeText(text);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction isMacCatalyst() {\n  return isPlatform('ios') && navigator.platform === 'MacIntel';\n}\n\nconst Globals = {\n  pwaUrl,\n  bugReportApiUrl,\n  twrDataUrl,\n  twrWaterDataUrl,\n  axiosInstance,\n  fetchData,\n  storeFile: 'TwriSettings.json',\n  getLog,\n  enableAppLog,\n  disableAppLog,\n  appSettings: {\n    'iconSize': '圖示大小',\n    'theme': '佈景主題',\n    'uiFontSize': 'UI 字型大小',\n    'textFontSize': '內容文字大小',\n  } as Record<string, string>,\n  fetchErrorContent: (\n    <div className='contentCenter'>\n      <IonLabel>\n        <div>\n          <div>連線失敗!</div>\n          <div style={{ fontSize: 'var(--ui-font-size)', paddingTop: 24 }}>請嘗試點擊右上方的重新讀取按鈕。如果問題持續發生，請執行<a href={`/${pwaUrl}/settings`} target=\"_self\">設定頁</a>的 app 異常回報功能。</div>\n        </div>\n      </IonLabel>\n    </div>\n  ),\n  updateApp: () => {\n    return new Promise(async resolve => {\n      navigator.serviceWorker.getRegistrations().then(async regs => {\n        const hasUpdates = await Promise.all(regs.map(reg => (reg.update() as any).then((newReg: ServiceWorkerRegistration) => {\n          return newReg.installing !== null || newReg.waiting !== null;\n        })));\n        resolve(hasUpdates.reduce((prev, curr) => prev || curr, false));\n      });\n    });\n  },\n  updateCssVars: (settings: Settings) => {\n    document.documentElement.style.cssText = `--text-font-size: ${settings.textFontSize}px; --ui-font-size: ${settings.uiFontSize}px;`\n  },\n  isMacCatalyst,\n  isTouchDevice: () => {\n    return (isPlatform('ios') && !isMacCatalyst()) || isPlatform('android');\n  },\n  isStoreApps: () => {\n    return isPlatform('pwa') || isPlatform('electron');\n  },\n  clearAppData,\n  disableAndroidChromeCallout,\n  disableIosSafariCallout,\n  copyToClipboard,\n};\n\nexport default Globals;\n","export class Bookmark {\n    ReservoirIdentifier: string = '';\n    ReservoirName: string = '';\n\n    constructor(json: Bookmark) {\n        this.ReservoirIdentifier = json.ReservoirIdentifier;\n        this.ReservoirName =  json.ReservoirName;\n    }\n}\n","import React from 'react';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { liquidFillGaugeDefaultSettings, loadLiquidFillGauge } from '../liquidFillGauge';\nimport { DailyOperationalStatisticsOfReservoir } from '../models/DailyOperationalStatisticsOfReservoir';\nimport { Settings } from '../models/Settings';\nimport './ReservoirLiquidView.css';\nimport { Bookmark } from '../models/Bookmark';\nimport { v4 } from 'uuid';\n\ninterface Props {\n  info: DailyOperationalStatisticsOfReservoir;\n  onIconClick: Function;\n  dispatch: Function;\n}\n\ninterface PageProps extends Props, RouteComponentProps<{\n}> {\n  settings: Settings;\n}\n\ninterface State {\n}\n\nclass _ReservoirLiquidView extends React.Component<PageProps, State> {\n  id: string = 'id' + v4();\n  constructor(props: any) {\n    super(props);\n    this.state = {\n    }\n  }\n\n  componentDidMount() {\n    this.updateLiquidIcon();\n  }\n\n  componentDidUpdate(prevProps: any) {\n    if (prevProps.info !== this.props.info || prevProps.settings.iconSize !== this.props.settings.iconSize) {\n      this.updateLiquidIcon();\n    }\n  }\n\n  updateLiquidIcon() {\n    const EffectiveWaterStorageCapacityPercent = (this.props.info.latestWaterData?.EffectiveWaterStorageCapacity || 0) / this.props.info.EffectiveCapacity * 100;\n    let liquidViewConfig = liquidFillGaugeDefaultSettings();\n    if (EffectiveWaterStorageCapacityPercent >= 50) {\n      this.setEnoughColor(liquidViewConfig);\n    } else {\n      this.setShortageColor(liquidViewConfig);\n    }\n    liquidViewConfig.circleThickness = 0.1;\n    liquidViewConfig.textVertPosition = 0.5;\n    liquidViewConfig.waveAnimateTime = 1000;\n    liquidViewConfig.waveHeight = 0.05;\n    liquidViewConfig.waveAnimate = true;\n    liquidViewConfig.waveRise = false;\n    liquidViewConfig.waveHeightScaling = true;\n    liquidViewConfig.waveOffset = 0.25;\n    liquidViewConfig.textSize = 0.75;\n    liquidViewConfig.waveCount = 3;\n    try {\n      loadLiquidFillGauge(\n        this.id,\n        EffectiveWaterStorageCapacityPercent.toFixed(1),\n        liquidViewConfig\n      );\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  setEnoughColor(liquidViewConfig: any) {\n    liquidViewConfig.circleColor = \"#0080ff\";\n    liquidViewConfig.textColor = \"#0080ff\";\n    liquidViewConfig.waveTextColor = \"#ffffff\";\n    liquidViewConfig.waveColor = \"#0080ff\";\n  }\n\n  setShortageColor(liquidViewConfig: any) {\n    liquidViewConfig.circleColor = \"#ff0080\";\n    liquidViewConfig.textColor = \"#ff0080\";\n    liquidViewConfig.waveTextColor = \"#ffffff\";\n    liquidViewConfig.waveColor = \"#ff0080\";\n  }\n\n  getTime() {\n    const date = new Date(this.props.info.latestWaterData?.ObservationTime ?? 0);\n    return `${date.toLocaleDateString()}, ${date.getHours()} ${date.getHours() >= 12 ? 'PM' : 'AM'}`;\n  }\n\n  render() {\n    return (\n      <div className='Reservoir'>\n        <div className='textFont title'>{this.props.info.ReservoirName}</div>\n        <div className='title'>\n          <svg id={this.id} width={`${this.props.settings.iconSize}px`} height={`${this.props.settings.iconSize}px`}\n            onClick={e => {\n              this.props.onIconClick(new Bookmark({\n                ReservoirIdentifier: this.props.info.ReservoirIdentifier,\n                ReservoirName: this.props.info.ReservoirName\n              }));\n            }}></svg>\n        </div>\n        <div style={{ width: `${this.props.settings.iconSize}px` }}>\n          <div className='textFontX0_8'>有效蓄水量：{Math.round(this.props.info.latestWaterData?.EffectiveWaterStorageCapacity || 0)}</div>\n          <div className='textFontX0_8' hidden={!this.props.settings.showAllReservoirs}>有效容量：{Math.round(this.props.info.EffectiveCapacity || 0)}</div>\n          <div className='textFontX0_8'>觀測時間：{this.getTime()}</div>\n        </div>\n      </div>\n    );\n  }\n};\n\nconst mapStateToProps = (state: any /*, ownProps*/) => {\n  return {\n    settings: state.settings\n  }\n};\n\n//const mapDispatchToProps = {};\n\nexport default connect(\n  mapStateToProps,\n)(_ReservoirLiquidView);\n","/*!\n * @license Open source under BSD 2-clause (http://choosealicense.com/licenses/bsd-2-clause/)\n * Copyright (c) 2015, Curtis Bratton\n * All rights reserved.\n *\n * Liquid Fill Gauge version history:\n *  v1.3: loadLiquidFillGauge supports to reload by clearing the old drawing by myh@live.com.\n *  v1.2: Rewrite for D3 v7 by myh@live.com.\n *  v1.1: Initial released by Curtis Bratton.\n */\n\nimport * as d3 from 'd3';\n\nexport function liquidFillGaugeDefaultSettings(){\n    return {\n        minValue: 0, // The gauge minimum value.\n        maxValue: 100, // The gauge maximum value.\n        circleThickness: 0.05, // The outer circle thickness as a percentage of it's radius.\n        circleFillGap: 0.05, // The size of the gap between the outer circle and wave circle as a percentage of the outer circles radius.\n        circleColor: \"#178BCA\", // The color of the outer circle.\n        waveHeight: 0.05, // The wave height as a percentage of the radius of the wave circle.\n        waveCount: 1, // The number of full waves per width of the wave circle.\n        waveRiseTime: 1000, // The amount of time in milliseconds for the wave to rise from 0 to it's final height.\n        waveAnimateTime: 18000, // The amount of time in milliseconds for a full wave to enter the wave circle.\n        waveRise: true, // Control if the wave should rise from 0 to it's full height, or start at it's full height.\n        waveHeightScaling: true, // Controls wave size scaling at low and high fill percentages. When true, wave height reaches it's maximum at 50% fill, and minimum at 0% and 100% fill. This helps to prevent the wave from making the wave circle from appear totally full or empty when near it's minimum or maximum fill.\n        waveAnimate: true, // Controls if the wave scrolls or is static.\n        waveColor: \"#178BCA\", // The color of the fill wave.\n        waveOffset: 0, // The amount to initially offset the wave. 0 = no offset. 1 = offset of one full wave.\n        textVertPosition: .5, // The height at which to display the percentage text withing the wave circle. 0 = bottom, 1 = top.\n        textSize: 1, // The relative height of the text to display in the wave circle. 1 = 50%\n        valueCountUp: true, // If true, the displayed value counts up from 0 to it's final value upon loading. If false, the final value is displayed.\n        displayPercent: true, // If true, a % symbol is displayed after the value.\n        textColor: \"#045681\", // The color of the value text when the wave does not overlap it.\n        waveTextColor: \"#A4DBf8\" // The color of the value text when the wave overlaps it.\n    };\n}\n\nexport function loadLiquidFillGauge(elementId, value, config) {\n    if(config == null) config = liquidFillGaugeDefaultSettings();\n\n    var gauge = d3.select(\"#\" + elementId);\n    // Clear the old drawing.\n    gauge.selectChildren().remove();\n    var radius = Math.min(parseInt(gauge.style(\"width\")), parseInt(gauge.style(\"height\")))/2;\n    var locationX = parseInt(gauge.style(\"width\"))/2 - radius;\n    var locationY = parseInt(gauge.style(\"height\"))/2 - radius;\n    var fillPercent = Math.max(config.minValue, Math.min(config.maxValue, value))/config.maxValue;\n\n    var waveHeightScale;\n    if(config.waveHeightScaling){\n        waveHeightScale = d3.scaleLinear()\n            .range([0,config.waveHeight,0])\n            .domain([0,50,100]);\n    } else {\n        waveHeightScale = d3.scaleLinear()\n            .range([config.waveHeight,config.waveHeight])\n            .domain([0,100]);\n    }\n\n    var textPixels = (config.textSize*radius/2);\n    var textFinalValue = parseFloat(value).toFixed(2);\n    var textStartValue = config.valueCountUp?config.minValue:textFinalValue;\n    var percentText = config.displayPercent?\"%\":\"\";\n    var circleThickness = config.circleThickness * radius;\n    var circleFillGap = config.circleFillGap * radius;\n    var fillCircleMargin = circleThickness + circleFillGap;\n    var fillCircleRadius = radius - fillCircleMargin;\n    var waveHeight = fillCircleRadius*waveHeightScale(fillPercent*100);\n\n    var waveLength = fillCircleRadius*2/config.waveCount;\n    var waveClipCount = 1+config.waveCount;\n    var waveClipWidth = waveLength*waveClipCount;\n\n    // Rounding functions so that the correct number of decimal places is always displayed as the value counts up.\n    var textRounder = function(value){ return Math.round(value); };\n    if(parseFloat(textFinalValue) !== parseFloat(textRounder(textFinalValue))){\n        textRounder = function(value){ return parseFloat(value).toFixed(1); };\n    }\n    if(parseFloat(textFinalValue) !== parseFloat(textRounder(textFinalValue))){\n        textRounder = function(value){ return parseFloat(value).toFixed(2); };\n    }\n\n    // Data for building the clip wave area.\n    var data = [];\n    for(var i = 0; i <= 40*waveClipCount; i++){\n        data.push({x: i/(40*waveClipCount), y: (i/(40))});\n    }\n\n    // Scales for drawing the outer circle.\n    var gaugeCircleX = d3.scaleLinear().range([0,2*Math.PI]).domain([0,1]);\n    var gaugeCircleY = d3.scaleLinear().range([0,radius]).domain([0,radius]);\n\n    // Scales for controlling the size of the clipping path.\n    var waveScaleX = d3.scaleLinear().range([0,waveClipWidth]).domain([0,1]);\n    var waveScaleY = d3.scaleLinear().range([0,waveHeight]).domain([0,1]);\n\n    // Scales for controlling the position of the clipping path.\n    var waveRiseScale = d3.scaleLinear()\n        // The clipping area size is the height of the fill circle + the wave height, so we position the clip wave\n        // such that the it will overlap the fill circle at all when at 0%, and will totally cover the fill\n        // circle at 100%.\n        .range([(fillCircleMargin+fillCircleRadius*2+waveHeight),(fillCircleMargin-waveHeight)])\n        .domain([0,1]);\n    var waveAnimateScale = d3.scaleLinear()\n        .range([0, waveClipWidth-fillCircleRadius*2]) // Push the clip area one full wave then snap back.\n        .domain([0,1]);\n\n    // Scale for controlling the position of the text within the gauge.\n    var textRiseScaleY = d3.scaleLinear()\n        .range([fillCircleMargin+fillCircleRadius*2,(fillCircleMargin+textPixels*0.7)])\n        .domain([0,1]);\n\n    // Center the gauge within the parent SVG.\n    var gaugeGroup = gauge.append(\"g\")\n        .attr('transform','translate('+locationX+','+locationY+')');\n\n    // Draw the outer circle.\n    var gaugeCircleArc = d3.arc()\n        .startAngle(gaugeCircleX(0))\n        .endAngle(gaugeCircleX(1))\n        .outerRadius(gaugeCircleY(radius))\n        .innerRadius(gaugeCircleY(radius-circleThickness));\n    gaugeGroup.append(\"path\")\n        .attr(\"d\", gaugeCircleArc)\n        .style(\"fill\", config.circleColor)\n        .attr('transform','translate('+radius+','+radius+')');\n\n    // Text where the wave does not overlap.\n    var text1 = gaugeGroup.append(\"text\")\n        .text(textRounder(textStartValue) + percentText)\n        .attr(\"class\", \"liquidFillGaugeText\")\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"font-size\", textPixels + \"px\")\n        .style(\"fill\", config.textColor)\n        .attr('transform','translate('+radius+','+textRiseScaleY(config.textVertPosition)+')');\n\n    // The clipping wave area.\n    var clipArea = d3.area()\n        .x(function(d) { return waveScaleX(d.x); } )\n        .y0(function(d) { return waveScaleY(Math.sin(Math.PI*2*config.waveOffset*-1 + Math.PI*2*(1-config.waveCount) + d.y*2*Math.PI));} )\n        .y1(function(d) { return (fillCircleRadius*2 + waveHeight); } );\n    var waveGroup = gaugeGroup.append(\"defs\")\n        .append(\"clipPath\")\n        .attr(\"id\", \"clipWave\" + elementId);\n    var wave = waveGroup.append(\"path\")\n        .datum(data)\n        .attr(\"d\", clipArea)\n        .attr(\"T\", 0);\n\n    // The inner circle with the clipping wave attached.\n    var fillCircleGroup = gaugeGroup.append(\"g\")\n        .attr(\"clip-path\", \"url(#clipWave\" + elementId + \")\");\n    fillCircleGroup.append(\"circle\")\n        .attr(\"cx\", radius)\n        .attr(\"cy\", radius)\n        .attr(\"r\", fillCircleRadius)\n        .style(\"fill\", config.waveColor);\n\n    // Text where the wave does overlap.\n    var text2 = fillCircleGroup.append(\"text\")\n        .text(textRounder(textStartValue) + percentText)\n        .attr(\"class\", \"liquidFillGaugeText\")\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"font-size\", textPixels + \"px\")\n        .style(\"fill\", config.waveTextColor)\n        .attr('transform','translate('+radius+','+textRiseScaleY(config.textVertPosition)+')');\n\n    // Make the value count up.\n    if(config.valueCountUp){\n        var textTween = function(){\n            var i = d3.interpolate(this.textContent, textFinalValue);\n            return function(t) { this.textContent = textRounder(i(t)) + percentText; }\n        };\n        text1.transition()\n            .duration(config.waveRiseTime)\n            .tween(\"text\", textTween);\n        text2.transition()\n            .duration(config.waveRiseTime)\n            .tween(\"text\", textTween);\n    }\n\n    // Make the wave rise. wave and waveGroup are separate so that horizontal and vertical movement can be controlled independently.\n    var waveGroupXPosition = fillCircleMargin+fillCircleRadius*2-waveClipWidth;\n    if(config.waveRise){\n        waveGroup.attr('transform','translate('+waveGroupXPosition+','+waveRiseScale(0)+')')\n            .transition()\n            .duration(config.waveRiseTime)\n            .attr('transform','translate('+waveGroupXPosition+','+waveRiseScale(fillPercent)+')')\n            .on(\"start\", function(){ wave.attr('transform','translate(1,0)'); }); // This transform is necessary to get the clip wave positioned correctly when waveRise=true and waveAnimate=false. The wave will not position correctly without this, but it's not clear why this is actually necessary.\n    } else {\n        waveGroup.attr('transform','translate('+waveGroupXPosition+','+waveRiseScale(fillPercent)+')');\n    }\n\n    if(config.waveAnimate) animateWave();\n\n    function animateWave() {\n        wave.attr('transform','translate('+waveAnimateScale(wave.attr('T'))+',0)');\n        wave.transition()\n            .duration(config.waveAnimateTime * (1-wave.attr('T')))\n            .ease(d3.easeLinear)\n            .attr('transform','translate('+waveAnimateScale(1)+',0)')\n            .attr('T', 1)\n            .on('end', function(){\n                wave.attr('T', 0);\n                animateWave(config.waveAnimateTime);\n            });\n    }\n\n    function GaugeUpdater(){\n        this.update = function(value){\n            var newFinalValue = parseFloat(value).toFixed(2);\n            var textRounderUpdater = function(value){ return Math.round(value); };\n            if(parseFloat(newFinalValue) !== parseFloat(textRounderUpdater(newFinalValue))){\n                textRounderUpdater = function(value){ return parseFloat(value).toFixed(1); };\n            }\n            if(parseFloat(newFinalValue) !== parseFloat(textRounderUpdater(newFinalValue))){\n                textRounderUpdater = function(value){ return parseFloat(value).toFixed(2); };\n            }\n\n            var textTween = function(){\n                var i = d3.interpolate(this.textContent, parseFloat(value).toFixed(2));\n                return function(t) { this.textContent = textRounderUpdater(i(t)) + percentText; }\n            };\n\n            text1.transition()\n                .duration(config.waveRiseTime)\n                .tween(\"text\", textTween);\n            text2.transition()\n                .duration(config.waveRiseTime)\n                .tween(\"text\", textTween);\n\n            var fillPercent = Math.max(config.minValue, Math.min(config.maxValue, value))/config.maxValue;\n            var waveHeight = fillCircleRadius*waveHeightScale(fillPercent*100);\n            var waveRiseScale = d3.scaleLinear()\n                // The clipping area size is the height of the fill circle + the wave height, so we position the clip wave\n                // such that the it will overlap the fill circle at all when at 0%, and will totally cover the fill\n                // circle at 100%.\n                .range([(fillCircleMargin+fillCircleRadius*2+waveHeight),(fillCircleMargin-waveHeight)])\n                .domain([0,1]);\n            var newHeight = waveRiseScale(fillPercent);\n            var waveScaleX = d3.scaleLinear().range([0,waveClipWidth]).domain([0,1]);\n            var waveScaleY = d3.scaleLinear().range([0,waveHeight]).domain([0,1]);\n            var newClipArea;\n            if(config.waveHeightScaling){\n                newClipArea = d3.area()\n                    .x(function(d) { return waveScaleX(d.x); } )\n                    .y0(function(d) { return waveScaleY(Math.sin(Math.PI*2*config.waveOffset*-1 + Math.PI*2*(1-config.waveCount) + d.y*2*Math.PI));} )\n                    .y1(function(d) { return (fillCircleRadius*2 + waveHeight); } );\n            } else {\n                newClipArea = clipArea;\n            }\n\n            var newWavePosition = config.waveAnimate?waveAnimateScale(1):0;\n            wave.transition()\n                .duration(0)\n                .transition()\n                .duration(config.waveAnimate?(config.waveAnimateTime * (1-wave.attr('T'))):(config.waveRiseTime))\n                .ease(d3.easeLinear)\n                .attr('d', newClipArea)\n                .attr('transform','translate('+newWavePosition+',0)')\n                .attr('T','1')\n                .on(\"end\", function(){\n                    if(config.waveAnimate){\n                        wave.attr('transform','translate('+waveAnimateScale(0)+',0)');\n                        animateWave(config.waveAnimateTime);\n                    }\n                });\n            waveGroup.transition()\n                .duration(config.waveRiseTime)\n                .attr('transform','translate('+waveGroupXPosition+','+newHeight+')')\n        }\n    }\n\n    return new GaugeUpdater();\n}\n","import React from 'react';\nimport { Redirect, Route, RouteComponentProps, withRouter } from 'react-router-dom';\nimport {\n  setupConfig,\n  IonApp,\n  IonIcon,\n  IonRouterOutlet,\n  IonTabBar,\n  IonTabButton,\n  IonTabs,\n  IonAlert,\n  isPlatform,\n  IonToast,\n} from '@ionic/react';\nimport { IonReactRouter } from '@ionic/react-router';\nimport { connect, Provider } from 'react-redux';\nimport queryString from 'query-string';\nimport getSavedStore from './redux/store';\nimport { water, settings, bookmark } from 'ionicons/icons';\n\n/* Core CSS required for Ionic components to work properly */\nimport '@ionic/react/css/core.css';\n\n/* Basic CSS for apps built with Ionic */\nimport '@ionic/react/css/normalize.css';\nimport '@ionic/react/css/structure.css';\nimport '@ionic/react/css/typography.css';\n\n/* Optional CSS utils that can be commented out */\nimport '@ionic/react/css/padding.css';\nimport '@ionic/react/css/float-elements.css';\nimport '@ionic/react/css/text-alignment.css';\nimport '@ionic/react/css/text-transformation.css';\nimport '@ionic/react/css/flex-utils.css';\nimport '@ionic/react/css/display.css';\n\n/* Theme variables */\nimport './theme/variables.css';\nimport SettingsPage from './pages/SettingsPage';\nimport HomePage from './pages/HomePage';\nimport Globals from './Globals';\nimport ShareTextModal from './components/ShareTextModal';\nimport BookmarkPage from './pages/BookmarkPage';\n\nconst electronBackendApi: any = (window as any).electronBackendApi;\n\nlet store = getSavedStore();\n/*\nclass DebugRouter extends IonReactRouter {\n  constructor(props: any) {\n    super(props);\n    console.log('initial history is: ', JSON.stringify(this.history, null, 2))\n    this.history.listen((location, action) => {\n      console.log(\n        `The current URL is ${location.pathname}${location.search}${location.hash}`\n      )\n      console.log(`The last navigation action was ${action}`, JSON.stringify(this.history, null, 2));\n    });\n  }\n}\n*/\n\nsetupConfig({\n  mode: 'md', // Use a consistent UI style across Android and iOS.\n  swipeBackEnabled: false,\n});\n\nexport var serviceWorkCallbacks = {\n  onSuccess: function (registration: ServiceWorkerRegistration) { },\n  onUpdate: function (registration: ServiceWorkerRegistration) { },\n};\n\ninterface Props {\n  dispatch: Function;\n  shareTextModal: any;\n  settings: any;\n}\n\ninterface PageProps extends RouteComponentProps<{\n  tab: string;\n  path: string;\n}> { }\n\ninterface AppOrigProps extends Props, RouteComponentProps<{\n  tab: string;\n  path: string;\n}> { }\n\ninterface State {\n  showToast: boolean;\n  toastMessage: string;\n  showUpdateAlert: boolean;\n  showRestoreAppSettingsToast: boolean;\n  downloadModal: any;\n}\n\nclass _App extends React.Component<PageProps> {\n  render() {\n    return (\n      <Provider store={store}>\n        <AppOrig {...this.props} />\n      </Provider>\n    );\n  }\n}\n\nclass _AppOrig extends React.Component<AppOrigProps, State> {\n  registrationNew: ServiceWorkerRegistration | null;\n  originalAppSettingsStr: string | null | undefined;\n\n  constructor(props: any) {\n    Globals.fetchData(store.dispatch);\n    super(props);\n    if (!this.props.settings.hasAppLog) {\n      Globals.disableAppLog();\n    }\n\n    electronBackendApi?.receive(\"fromMain\", (data: any) => {\n      switch (data.event) {\n        case 'version':\n          store.dispatch({\n            type: \"TMP_SET_KEY_VAL\",\n            key: 'mainVersion',\n            val: data.version,\n          });\n          break;\n      }\n    });\n    electronBackendApi?.send(\"toMain\", { event: 'ready' });\n\n    this.registrationNew = null;\n    // Disable browser callout.\n    if (isPlatform('android')) {\n      window.oncontextmenu = Globals.disableAndroidChromeCallout;\n    } else if (isPlatform('ios')) {\n      document.ontouchend = Globals.disableIosSafariCallout.bind(window);\n    }\n\n    // ----- Initializing UI settings -----\n    // Apply the theme setting.\n    while (document.body.classList.length > 0) {\n      document.body.classList.remove(document.body.classList.item(0)!);\n    }\n    document.body.classList.toggle(`theme${this.props.settings.theme}`, true);\n\n    // Modify UI settings from query string.\n    const queryParams = queryString.parse(this.props.location.search) as any;\n    if (queryParams.settings) {\n      this.originalAppSettingsStr = localStorage.getItem(Globals.storeFile);\n      (queryParams.settings as string).split(',').forEach(setting => {\n        const keyVal = setting.split('=');\n        this.props.dispatch({\n          type: \"SET_KEY_VAL\",\n          key: keyVal[0],\n          val: +keyVal[1],\n        });\n      });\n    }\n    setImmediate(() => {\n      Globals.updateCssVars(this.props.settings);\n    });\n\n    this.state = {\n      showUpdateAlert: false,\n      showRestoreAppSettingsToast: (queryParams.settings != null && this.originalAppSettingsStr != null) || false,\n      showToast: false,\n      toastMessage: '',\n      downloadModal: { progress: 0, show: false }\n    };\n\n    serviceWorkCallbacks.onUpdate = (registration: ServiceWorkerRegistration) => {\n      this.registrationNew = registration;\n      this.setState({ showUpdateAlert: true });\n    };\n\n    serviceWorkCallbacks.onSuccess = (registration: ServiceWorkerRegistration) => {\n    };\n\n    // Preload speechSynthesis.\n    if (typeof speechSynthesis !== 'undefined') {\n      speechSynthesis.getVoices();\n      speechSynthesis.cancel();\n    }\n\n    // Enable screen wake lock.\n    if ((navigator as any).wakeLock) {\n      this.wakeLockScreen();\n      document.addEventListener(\"visibilitychange\", async () => {\n        if (document.visibilityState === 'visible') {\n          this.wakeLockScreen();\n        } else {\n          this.wakeLockScreenRelease()\n        }\n      });\n    }\n  }\n\n  restoreAppSettings() {\n    localStorage.setItem(Globals.storeFile, this.originalAppSettingsStr!);\n    this.props.dispatch({ type: 'LOAD_SETTINGS' });\n  }\n\n  // Prevent device from sleeping.\n  wakeLock: any;\n  async wakeLockScreen() {\n    try {\n      const wakeLock = (navigator as any).wakeLock;\n      if (wakeLock != null) {\n        this.wakeLock = await wakeLock.request('screen');\n        console.log('Screen wake lock is requested.');\n      } else {\n        console.error('navigator.wakeLock is undefined.');\n      }\n    } catch (err: any) {\n      // the wake lock request fails - usually system related, such low as battery\n      console.log(`${err.name}, ${err.message}`);\n      console.log(new Error().stack);\n    }\n  }\n\n  async wakeLockScreenRelease() {\n    if (this.wakeLock != null) {\n      await this.wakeLock.release();\n      this.wakeLock = null;\n      console.log('Screen wake lock is released.');\n    }\n  }\n\n  routeByQueryString() {\n    // This app uses client side routing. \n    // Without the first loading of this app,\n    // any client side route becomes a server side route!\n    // These invalid server side routings cause 404 errors.\n    // To workaround these errors, we can use GitHub 404.html redirection\n    // to pass the client side routes to this app by using query string.\n    // After this app loads, it can use the query string to correctly redirect to\n    // a client side route!\n    console.log(window.location.search);\n    const routeMatches = /route=([^&]*)/.exec(window.location.search);\n    const queryMatches = /query=([^&]*)/.exec(window.location.search);\n    if (routeMatches !== null) {\n      const route = decodeURIComponent(routeMatches[1]);\n\n      let query = ''\n      if (queryMatches !== null) {\n        query = decodeURIComponent(queryMatches[1]);\n      }\n      return <Redirect to={`${Globals.pwaUrl}` + route + query} />;\n    } else if (window.location.pathname === `${Globals.pwaUrl}/` || window.location.pathname === `${Globals.pwaUrl}`) {\n      return <Redirect to={`${Globals.pwaUrl}/bookmarks`} />;\n    }\n  }\n\n  render() {\n    return (\n      <IonApp>\n        <IonReactRouter>\n          <IonTabs>\n            <IonRouterOutlet animated={false}>\n              <Route path={`${Globals.pwaUrl}/:tab(bookmarks)`} render={(props: any) => <BookmarkPage {...props} />} exact={true} />\n              <Route path={`${Globals.pwaUrl}/:tab(home)`} render={(props: any) => <HomePage {...props} />} exact={true} />\n              <Route path={`${Globals.pwaUrl}/settings`} render={(props: any) => <SettingsPage {...props} />} />\n              <Route path={`${Globals.pwaUrl}/`} render={() => { return this.routeByQueryString(); }} exact={true} />\n            </IonRouterOutlet>\n            <IonTabBar slot=\"bottom\">\n              <IonTabButton tab=\"bookmarks\" href={`${Globals.pwaUrl}/bookmarks`}>\n                <IonIcon icon={bookmark} />\n              </IonTabButton>\n              <IonTabButton tab=\"home\" href={`${Globals.pwaUrl}/home`}>\n                <IonIcon icon={water} />\n              </IonTabButton>\n              <IonTabButton tab=\"settings\" href={`${Globals.pwaUrl}/settings`}>\n                <IonIcon icon={settings} />\n              </IonTabButton>\n            </IonTabBar>\n          </IonTabs>\n        </IonReactRouter>\n        <IonAlert\n          cssClass='uiFont'\n          isOpen={this.state.showUpdateAlert}\n          backdropDismiss={false}\n          onDidPresent={(ev) => {\n            // Run SKIP_WAITING at onDidPresent event to avoid a race condition of\n            // an old page fetching old JS chunks with a new service worker!\n            this.registrationNew?.installing?.postMessage({ type: 'SKIP_WAITING' });\n            this.registrationNew?.waiting?.postMessage({ type: 'SKIP_WAITING' });\n          }}\n          header={'App 已更新，請重啟!'}\n          buttons={[\n            {\n              text: '關閉',\n              cssClass: 'primary uiFont',\n              handler: (value) => {\n                this.setState({\n                  showUpdateAlert: false,\n                });\n              },\n            },\n            {\n              text: '顯示版本歷史',\n              cssClass: 'secondary uiFont',\n              handler: (value) => {\n                window.open('https://github.com/MrMYHuang/twri#history');\n              },\n            }\n          ]}\n        />\n\n        <ShareTextModal\n          {...{\n            text: this.props.shareTextModal?.text,\n            showModal: this.props.shareTextModal?.show || false,\n            finish: () => {\n              store.dispatch({\n                type: \"TMP_SET_KEY_VAL\",\n                key: 'shareTextModal',\n                val: { show: false },\n              });\n            }, ...this.props\n          }}\n        />\n\n        <IonToast\n          cssClass='uiFont'\n          isOpen={this.state.showRestoreAppSettingsToast}\n          onDidDismiss={() => this.setState({ showRestoreAppSettingsToast: false })}\n          message={`已套用 app 連結中的設定，是否還原設定？`}\n          buttons={[\n            {\n              text: '取消',\n              role: 'cancel',\n              handler: () => this.setState({ showRestoreAppSettingsToast: false })\n            },\n            {\n              text: '還原',\n              handler: () => this.restoreAppSettings(),\n            },\n          ]}\n        />\n\n        <IonToast\n          cssClass='uiFont'\n          isOpen={this.state.showToast}\n          onDidDismiss={() => this.setState({ showToast: false })}\n          message={this.state.toastMessage}\n          duration={2000}\n        />\n      </IonApp>\n    );\n  }\n}\n\nconst mapStateToProps = (state: any /*, ownProps*/) => {\n  return {\n    shareTextModal: state.tmpSettings.shareTextModal,\n    settings: state.settings,\n  }\n};\n\nconst AppOrig = connect(\n  mapStateToProps,\n)(_AppOrig);\n\n\nconst App = withRouter(_App);\n\nexport default App;\n"],"sourceRoot":""}